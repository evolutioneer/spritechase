var Landing=(function(){var j;var f;var m;var h;var e;var l=function(){debug("Landing.init()");j=$("#register-name-message");f=$("#register-password-message");m=$("#register-email-message");h=$("#register-submit");e=$("#login-submit");$("#register-name").bind("blur",a);$("#register-password-1,#register-password-2").bind("blur",i);$("#register-email").bind("blur",c);h.bind("click",g);e.bind("click",d)};var a=function(n){j.removeClass("valid").text("Checking...");$.ajax({url:"/users/isFree/"+$("#register-name").attr("value"),datatype:"json",success:function(o){o=JSON.parse(o);if(o.response=="1"){debug("+++ Name is available!");j.addClass("valid").removeClass("neutral").text('"'+$("#register-name").attr("value")+'" is available');k()}else{if(o.response=="0"){$("#register-user-message").removeClass("valid").removeClass("neutral").text('"'+$("#register-name").attr("value")+'" is already taken')
}else{$("#register-user-message").removeClass("valid").removeClass("neutral").text(o.response)}}},error:function(p,o){debug("!!! error: ".type)}})};var i=function(o){f.text("Checking...");var p=$("#register-password-1").attr("value");var n=$("#register-password-2").attr("value");if(p==""||n==""){f.removeClass("valid").addClass("neutral").text("Enter your password (twice)")}else{if(p!=n){f.removeClass("valid").removeClass("neutral").text("The password fields do not match")}else{f.addClass("valid").removeClass("neutral").text("They match!");k()}}};var c=function(n){debug("onRegisterEmailBlur()");var o=$("#register-email").attr("value");if(b(o)){m.addClass("valid").removeClass("neutral").text("Thanks!  We will keep it private")}else{if(o==""){m.removeClass("valid").addClass("neutral").text("(optional) Enter your email")
}else{m.removeClass("valid").removeClass("neutral").text("You did not enter a valid email address")}}};var k=function(){debug("registrationReadyCheck()");if(j.hasClass("valid")&&f.hasClass("valid")){h.removeClass("disabled")}else{h.addClass("disabled")}};var g=function(n){debug("onRegisterSubmit()");if(h.hasClass("disabled")){return}$("#register-form").submit()};var d=function(n){debug("onLoginSubmit()");if(e.hasClass("disabled")){return}$("#login-form").submit()};var b=function(n){var o=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return n.match(o)};return{init:l}})();$(document).ready(Landing.init);